"use strict";(self["webpackChunkvaxo"]=self["webpackChunkvaxo"]||[]).push([[328],{3560:function(s,e,a){a.d(e,{L:function(){return o}});a(7658);var r=a(4870),t=a(5543),l=a(4850);const o=(0,t.Q_)("user",(()=>{const s=(0,r.iH)(null),e=(0,r.iH)([]),a=(0,r.iH)(null),t=async()=>{try{s.value=null;const a=await l.iJ.get("/api/users/agencyUsers",{showLoader:!0});return 200===a.status?(e.value=a.data,{success:!0}):{success:!1}}catch(a){return s.value=a instanceof Error?a:new Error("Failed to load users"),console.log(a),{success:!1}}},o=async a=>{try{s.value=null;const r=await l.iJ.post("/api/auth/platform/register-user",a,{showLoader:!0});if(201===r.status){const s=r.data;return s.roles=["admin"],e.value.push(s),{success:!0}}return{success:!1}}catch(r){return Array.isArray(r)?(s.value=r,{success:!1}):(s.value=r instanceof Error?r:new Error("Failed to add user"),{success:!1})}},c=async a=>{try{s.value=null;const r=await l.iJ.delete(`/api/users/${a.email}`,{showLoader:!0});if(204===r.status){const s=e.value.findIndex((s=>s.id===a.id));return-1!==s&&e.value.splice(s,1),{success:!0}}return{success:!1}}catch(r){return s.value=r instanceof Error?r:new Error("Failed to delete user"),{success:!1}}},n=async()=>{try{s.value=null;const e=await l.iJ.get("/api/users/profile",{showLoader:!0});return 200===e.status?(a.value=e.data,{success:!0}):{success:!1}}catch(e){return s.value=e instanceof Error?e:new Error("Failed to fetch profile details"),console.log(e),{success:!1}}},d=async e=>{try{s.value=null;const a=await l.iJ.post("/api/users/changePassword",e,{showLoader:!0});return 204===a.status?{success:!0}:{success:!1}}catch(a){return s.value=a instanceof Error?a:"Failed to change the password",console.log("ERROR***",s.value),{success:!1}}};return{error:s,users:e,profile:a,loadUsers:t,addNewUser:o,deleteUser:c,fetchProfile:n,changePassword:d}}))},4328:function(s,e,a){a.r(e),a.d(e,{default:function(){return as}});var r=a(3396),t=(a(7658),a(4870)),l=a(7139),o=a(9242),c=a(3560),n=a(6252),d=a(5543),i=a(2492),u=a.n(i),m=a(5469),w=a(2483);const f={class:"row"},b={class:"col-lg-8"},p={class:"card border-0 box-shadow border-radius-10 mb-4"},_={class:"card-body p-4"},v={key:0,id:"errorAlert",class:"alert alert-danger",role:"alert"},h={class:"row"},y={class:"col-lg-12"},g={class:"form-group mb-4"},k={class:"col-lg-12"},x={class:"form-group mb-4"},P={class:"col-lg-12"},U={class:"form-group mb-4"},S={class:"col-lg-4"},E={class:"card border-0 box-shadow border-radius-10 mb-4"},W={class:"card-body p-4"},z={class:"ps-0 mb-4 list-unstyled"},C={class:"fs-14 text-body mb-2"},F={class:"fs-14 text-body mb-2"},L={class:"fs-14 text-body mb-2"},J={class:"fs-14 text-body mb-2"},A={class:"ps-0 mb-4 list-unstyled d-flex"},D={href:"https://www.facebook.com/",class:"default-btn text-decoration-none border-btn px-3 py-2 d-inline-block",target:"_blank"},H={class:"ms-2"},N={href:"https://www.twitter.com/",class:"default-btn text-decoration-none border-btn px-3 py-2 d-inline-block",target:"_blank"},q={class:"ms-2"},I={href:"https://www.linkedin.com/",class:"default-btn text-decoration-none border-btn px-3 py-2 d-inline-block",target:"_blank"},R={class:"ms-2"},V={href:"https://www.mail.com/",class:"default-btn text-decoration-none border-btn px-3 py-2 d-inline-block",target:"_blank"},Z={class:"ps-0 mb-0 list-unstyled"},O={class:"fs-14 text-body mb-2"},j={class:"fs-14 text-body mb-2"},B={class:"fs-14 text-body mb-2"},M={class:"fs-14 text-body mb-2"};var G=(0,r.aZ)({__name:"ProfileContent",setup(s){const{fetchProfile:e,changePassword:a}=(0,c.L)(),{profile:i,error:G}=(0,d.Jk)((0,c.L)()),{userAgency:K,clearToken:Q}=(0,n.t)(),T=(0,w.tv)(),Y=(0,t.qj)({currentPassword:"",newPassword:""}),$={oldPassword:"required",password:"required|min:5|max:100|excluded:password",confirm_password:"passwords_mismatch:@password"},X=(0,t.iH)(),ss=()=>{Y.currentPassword="",Y.newPassword="",G.value=null,X.value?.resetForm()},{handleSubmit:es}=(0,m.cI)(),as=es((async()=>{if(!X.value)return;const{valid:s}=await X.value.validate();if(!s)return void console.log("Form has validation errors");const e=await a(Y);e.success&&(u().fire({toast:!0,position:"top-end",icon:"success",title:"Password was changed successfully.",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),X.value?.resetForm(),Q(),T.push("/"))}));return(0,r.bv)((()=>e())),(s,e)=>{const a=(0,r.up)("vee-field"),c=(0,r.up)("ErrorMessage"),n=(0,r.up)("vee-form"),d=(0,r.up)("vue-feather");return(0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("div",b,[(0,r._)("div",p,[(0,r._)("div",_,[e[6]||(e[6]=(0,r._)("div",{class:"card-title d-flex justify-content-between align-items-center mb-3"},[(0,r._)("h3",{class:"fw-medium fs-18 mb-3"},"Change Password")],-1)),(0,t.SU)(G)?((0,r.wg)(),(0,r.iD)("div",v,(0,l.zw)((0,t.SU)(G)),1)):(0,r.kq)("",!0),(0,r.Wm)(n,{ref_key:"formRef",ref:X,"validation-schema":$,onSubmit:(0,t.SU)(as)},{default:(0,r.w5)((()=>[(0,r._)("div",h,[(0,r._)("div",y,[(0,r._)("div",g,[e[2]||(e[2]=(0,r._)("label",{class:"label"},"Old Password",-1)),(0,r.Wm)(a,{type:"password",name:"oldPassword",class:"form-control",placeholder:"",modelValue:Y.currentPassword,"onUpdate:modelValue":e[0]||(e[0]=s=>Y.currentPassword=s)},null,8,["modelValue"]),(0,r.Wm)(c,{class:"error-message",name:"oldPassword"})])]),(0,r._)("div",k,[(0,r._)("div",x,[e[3]||(e[3]=(0,r._)("label",{class:"label"},"Password",-1)),(0,r.Wm)(a,{name:"password",bails:!1},{default:(0,r.w5)((({field:s,errors:a})=>[(0,r.wy)((0,r._)("input",(0,r.dG)({type:"password",class:"form-control",placeholder:""},s,{"onUpdate:modelValue":e[1]||(e[1]=s=>Y.newPassword=s)}),null,16),[[o.nr,Y.newPassword]]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a,(s=>((0,r.wg)(),(0,r.iD)("div",{class:"error-message",key:s},(0,l.zw)(s),1)))),128))])),_:1})])]),(0,r._)("div",P,[(0,r._)("div",U,[e[4]||(e[4]=(0,r._)("label",{class:"label"},"Confirm Password",-1)),(0,r.Wm)(a,{type:"password",name:"confirm_password",class:"form-control",placeholder:""}),(0,r.Wm)(c,{class:"error-message",name:"confirm_password"})])]),(0,r._)("div",{class:"col-lg-12 mb-5"},[(0,r._)("div",{class:"form-group"},[e[5]||(e[5]=(0,r._)("button",{type:"submit",class:"default-btn"}," Save ",-1)),(0,r._)("button",{type:"button",class:"default-btn border-btn ms-3",onClick:ss}," Cancel ")])])])])),_:1},8,["onSubmit"])])])]),(0,r._)("div",S,[(0,r._)("div",E,[(0,r._)("div",W,[e[15]||(e[15]=(0,r._)("h4",{class:"fs-18 fw-medium mb-3"},"Profile",-1)),(0,r._)("ul",z,[(0,r._)("li",C,[e[7]||(e[7]=(0,r._)("span",{class:"text-dark"},"Name:",-1)),(0,r.Uk)(" "+(0,l.zw)((0,t.SU)(i)?.fullName),1)]),(0,r._)("li",F,[e[8]||(e[8]=(0,r._)("span",{class:"text-dark"},"Email:",-1)),(0,r.Uk)(" "+(0,l.zw)((0,t.SU)(i)?.email),1)]),(0,r._)("li",L,[e[9]||(e[9]=(0,r._)("span",{class:"text-dark"},"Phone:",-1)),(0,r.Uk)(" "+(0,l.zw)((0,t.SU)(i)?.phoneNumber),1)]),(0,r._)("li",J,[e[10]||(e[10]=(0,r._)("span",{class:"text-dark"},"Joined:",-1)),(0,r.Uk)(" "+(0,l.zw)((0,t.SU)(i)?.created),1)])]),e[16]||(e[16]=(0,r._)("h4",{class:"fs-18 fw-medium mb-4"},"Social Profiles:",-1)),(0,r._)("ul",A,[(0,r._)("li",null,[(0,r._)("a",D,[(0,r.Wm)(d,{type:"facebook",style:{width:"16"}})])]),(0,r._)("li",H,[(0,r._)("a",N,[(0,r.Wm)(d,{type:"twitter",style:{width:"16"}})])]),(0,r._)("li",q,[(0,r._)("a",I,[(0,r.Wm)(d,{type:"linkedin",style:{width:"16"}})])]),(0,r._)("li",R,[(0,r._)("a",V,[(0,r.Wm)(d,{type:"mail",style:{width:"16"}})])])]),e[17]||(e[17]=(0,r._)("h4",{class:"fs-18 fw-medium mb-3"},"Other Info:",-1)),(0,r._)("ul",Z,[(0,r._)("li",O,[e[11]||(e[11]=(0,r._)("span",{class:"text-dark"},"Agency:",-1)),(0,r.Uk)(" "+(0,l.zw)((0,t.SU)(K)?.name),1)]),(0,r._)("li",j,[e[12]||(e[12]=(0,r._)("span",{class:"text-dark"},"Ministry:",-1)),(0,r.Uk)(" "+(0,l.zw)((0,t.SU)(K)?.ministry),1)]),(0,r._)("li",B,[e[13]||(e[13]=(0,r._)("span",{class:"text-dark"},"Email:",-1)),(0,r.Uk)(" "+(0,l.zw)((0,t.SU)(K)?.emailAddress),1)]),(0,r._)("li",M,[e[14]||(e[14]=(0,r._)("span",{class:"text-dark"},"Contact:",-1)),(0,r.Uk)(" "+(0,l.zw)((0,t.SU)(K)?.contactNumber),1)])])])])])])}}}),K=a(89);const Q=(0,K.Z)(G,[["__scopeId","data-v-15528dfa"]]);var T=Q,Y=a(7920);const $={class:"container-fluid"},X={class:"inner-main-content"};var ss=(0,r.aZ)({__name:"ProfilePage",setup(s){return(s,e)=>((0,r.wg)(),(0,r.iD)("div",$,[(0,r._)("div",X,[(0,r.Wm)(T),(0,r.Wm)(Y.Z)])]))}});const es=ss;var as=es}}]);
//# sourceMappingURL=328.de4a522b.js.map